
import java.time.LocalDate
import java.time.LocalTime
import java.time.format.DateTimeFormatter


data class Employee(
    val EmployeeId : Int,
    val FirstName: String,
    val LastName : String,
    val Role : String
)

val EmployeeList = mutableListOf<Employee>()

data class CheckIn (
    val EmployeeId: Int,
    val CheckInDate: LocalDate,
    val CheckInTime : LocalTime
)

val CheckInList = mutableListOf<CheckIn>()


fun CheckedIn (employeeId: Int){
    val employee = validate(employeeId)
    if(employee == null){
        println("$employeeId is not a valid EmployeeId")
        return
    }
    val AlreadyCheckedIn = CheckInList.any{ it.EmployeeId == employeeId}
    if(AlreadyCheckedIn){
        println("Employee ID ${employee.EmployeeId} : ${employee.FirstName} ${employee.LastName} has already checked In")
    }
    else{
        val checkInEntry = CheckIn(employeeId, LocalDate.now() , LocalTime.now())
        val formattedTime = checkInEntry.CheckInTime.format(DateTimeFormatter.ofPattern("HH:mm:ss"))
        CheckInList.add(checkInEntry)
        println("Employee ID ${employee.EmployeeId}: ${employee.FirstName} ${employee.LastName} checked in on ${checkInEntry.CheckInDate} at $formattedTime.")
    }
}

fun validate(employeeId: Int) : Employee ?{
    for (employee in EmployeeList){
        if(employee.EmployeeId == employeeId){
            return employee
        }
    }
    return  null
}


fun main(){

    EmployeeList.add(Employee(1 , "Keerthana" , "Ravikumar" , "Developer"))
    EmployeeList.add(Employee(2 , "Hashini" , "Ravikumar" , "Tester"))
    EmployeeList.add(Employee(3 , "Maha" , "E" , "Developer"))
    EmployeeList.add(Employee(5 , "Anu" , "M" , "Manager"))
    EmployeeList.add(Employee(6 , "Keerthu" , "R" , "Developer"))
    EmployeeList.add(Employee(7 , "Saru" , "M" , "Developer"))
    EmployeeList.add(Employee(8 , "Sowmi" , "S" , "HR"))


    while (true) {
        print("\nEnter Employee ID to check in: ")
        val input = readln()

        if (input == "-1") {
            println("Invalid id")
            break
        }

        val employeeId = input.toIntOrNull()
        if (employeeId == null) {
            println(" Please enter a valid numeric Employee ID.")
            continue
        }

        CheckedIn(employeeId)
    }

}
